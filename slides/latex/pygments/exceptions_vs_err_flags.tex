\begin{Verbatim}[label=\makebox{\url{https://github.com/lucabaldini/cmepda/tree/master/slides/latex/snippets/exceptions\_vs\_err\_flags.py}},commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} index() is the same as find(), but rise an exception in case of failure}
\PY{k}{def} \PY{n+nf}{cut\PYZus{}two\PYZus{}before}\PY{p}{(}\PY{n}{input\PYZus{}string}\PY{p}{,} \PY{n}{substring}\PY{p}{)}\PY{p}{:}
    \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{} Cut a string up to two positions before that of the given substring and}
\PY{l+s+sd}{    return it \PYZdq{}\PYZdq{}\PYZdq{}}
    \PY{n}{pos} \PY{o}{=} \PY{n}{input\PYZus{}string}\PY{o}{.}\PY{n}{index}\PY{p}{(}\PY{n}{substring}\PY{p}{)}
    \PY{k}{return} \PY{n}{input\PYZus{}string}\PY{p}{[}\PY{p}{:}\PY{p}{(}\PY{n}{pos}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{]}

\PY{c+c1}{\PYZsh{} If the substring exists in the string everything works fine}
\PY{k}{print}\PY{p}{(}\PY{n}{cut\PYZus{}two\PYZus{}before}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{We all live in a Yellow Submarine}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Yellow}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{)}
\PY{c+c1}{\PYZsh{} No silent bug here!}
\PY{k}{print}\PY{p}{(}\PY{n}{cut\PYZus{}two\PYZus{}before}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{We all live in a Yellow Submarine}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Red}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{)}

[Output]
We all live in a
Traceback (most recent call last):
  File "snippets/exceptions_vs_err_flags.py", line 11, in <module>
    print(cut_two_before('We all live in a Yellow Submarine', 'Red'))
  File "snippets/exceptions_vs_err_flags.py", line 5, in cut_two_before
    pos = input_string.index(substring)
ValueError: substring not found
\end{Verbatim}