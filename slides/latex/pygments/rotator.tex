\begin{Verbatim}[label=\makebox{\url{https://github.com/lucabaldini/cmepda/tree/master/slides/latex/snippets/rotator.py}},commandchars=\\\{\}]
\PY{k+kn}{import} \PY{n+nn}{numpy}

\PY{k}{def} \PY{n+nf}{create\PYZus{}rotator}\PY{p}{(}\PY{n}{theta}\PY{p}{)}\PY{p}{:}
    \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{} Efficient rotation. Cosinus and sinus values are saved in the closure,}
\PY{l+s+sd}{    so that they are computed exactly once.\PYZdq{}\PYZdq{}\PYZdq{}}
    \PY{n}{c} \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{cos}\PY{p}{(}\PY{n}{theta}\PY{p}{)}
    \PY{n}{s} \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{sin}\PY{p}{(}\PY{n}{theta}\PY{p}{)}
    \PY{k}{def} \PY{n+nf}{rotate}\PY{p}{(}\PY{n}{x}\PY{p}{,} \PY{n}{y}\PY{p}{)}\PY{p}{:}
        \PY{n}{x\PYZus{}rot} \PY{o}{=} \PY{n}{c} \PY{o}{*} \PY{n}{x} \PY{o}{\PYZhy{}} \PY{n}{s} \PY{o}{*} \PY{n}{y}
        \PY{n}{y\PYZus{}rot} \PY{o}{=} \PY{n}{s} \PY{o}{*} \PY{n}{x} \PY{o}{+} \PY{n}{c} \PY{o}{*} \PY{n}{y}
        \PY{k}{return} \PY{n}{x\PYZus{}rot}\PY{p}{,} \PY{n}{y\PYZus{}rot}
    \PY{k}{return} \PY{n}{rotate}

\PY{n}{x}\PY{p}{,} \PY{n}{y} \PY{o}{=} \PY{l+m+mf}{1.}\PY{p}{,} \PY{l+m+mf}{0.}
\PY{n}{theta} \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{pi}\PY{o}{/}\PY{l+m+mi}{4}
\PY{n}{rotate\PYZus{}by\PYZus{}theta} \PY{o}{=} \PY{n}{create\PYZus{}rotator}\PY{p}{(}\PY{n}{theta}\PY{p}{)}
\PY{k}{print}\PY{p}{(}\PY{n}{rotate\PYZus{}by\PYZus{}theta}\PY{p}{(}\PY{n}{x}\PY{p}{,} \PY{n}{y}\PY{p}{)}\PY{p}{)}

[Output]
(0.7071067811865476, 0.7071067811865475)
\end{Verbatim}